<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Andy Grogan-Kaylor" />
  <title>Ordinal and Multinomial Logistic Regression</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="https://www.w3.org/Talks/Tools/Slidy2/styles/slidy.css" />
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="../UMslidy.css" />
  <script src="https://www.w3.org/Talks/Tools/Slidy2/scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
    <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">Ordinal and Multinomial Logistic Regression</h1>
  <p class="author">
Andy Grogan-Kaylor
  </p>
</div>
<div class="slide section level1">

<p>Andy Grogan-Kaylor</p>
<p>14 May 2020</p>
</div>
<div id="meta-background" class="slide section level1">
<h1>Meta-Background</h1>
<div class="figure">
<img src="twitter-ordinal-annotated.PNG" alt="Tweet About Ordinal Models" />
<p class="caption">Tweet About Ordinal Models</p>
</div>
</div>
<div id="key-concepts-and-commands" class="slide section level1">
<h1>Key Concepts and Commands</h1>
<ul class="incremental">
<li>Implementations differ; formulas are our friends</li>
<li>Extensions to logistic model: ordinal and multinomial logit</li>
</ul>
<p><span class="math display">\[ F(y) = \beta_0 + \beta x_1 + \beta x_2 + ... \]</span></p>
<ul class="incremental">
<li>Ordinal model</li>
</ul>
<p><span class="math inline">\(y(\text{1, 2, 3, etc.}) = \beta_0 + \beta x_1 + \beta x_2 + ...\)</span></p>
<ul class="incremental">
<li>Multinomial model</li>
</ul>
<p><span class="math inline">\(y(\text{2 vs. 1}) = \beta_0 + \beta x_1 + \beta x_2 + ...\)</span></p>
<p><span class="math inline">\(y(\text{3 vs. 1}) = \beta_0 + \beta x_1 + \beta x_2 + ...\)</span></p>
<ul class="incremental">
<li>Think about OR’s, predicted probabilities, non-linearity</li>
</ul>
</div>
<div id="get-the-data-general-social-survey" class="slide section level1">
<h1>Get The Data (General Social Survey)</h1>
<pre class="stata"><code>. clear all</code></pre>
<pre class="stata"><code>. set maxvar 10000 // increase number of allowable variables</code></pre>
<pre class="stata"><code>. use &quot;/Users/agrogan/Box Sync/DATA WAREHOUSE/General Social Survey/GSS7218_R1.DTA&quot;, clear</code></pre>
<pre class="stata"><code>. keep sex maeduc paeduc age degree</code></pre>
<pre class="stata"><code>. save GSSsmall.dta, replace
file GSSsmall.dta saved</code></pre>
<pre class="stata"><code>. describe // describe the data

Contains data from GSSsmall.dta
  obs:        64,814                          
 vars:             5                          14 May 2020 22:41
 size:       324,070                          
───────────────────────────────────────────────────────────────────────────────────────────────
              storage   display    value
variable name   type    format     label      variable label
───────────────────────────────────────────────────────────────────────────────────────────────
age             byte    %8.0g      AGE        age of respondent
paeduc          byte    %8.0g      LABK       highest year school completed, father
maeduc          byte    %8.0g      LABK       highest year school completed, mother
degree          byte    %8.0g      LABL       r&#39;s highest degree
sex             byte    %8.0g      SEX        respondents sex
───────────────────────────────────────────────────────────────────────────────────────────────
Sorted by: </code></pre>
</div>
<div id="thinking-about-your-data-and-data-wrangling" class="slide section level1">
<h1>Thinking About Your Data and Data Wrangling</h1>
<blockquote>
<p>It is always good to think about your data and what the values of different variables represent. In Stata, however, there is very little additional data wrangling to prepare the data. In R, there is considerable data wrangling since we have to employ special commands just to get <em>variable</em> and <em>value</em> labels, and to ensure that <em>numeric</em> <em>dependent</em> variables are recoded as <em>factors</em>. In Stata there are no such issues!!!</p>
</blockquote>
</div>
<div id="descriptive-statistics" class="slide section level1">
<h1>Descriptive Statistics</h1>
<pre class="stata"><code>. summarize 

    Variable │        Obs        Mean    Std. Dev.       Min        Max
─────────────┼─────────────────────────────────────────────────────────
         age │     64,586    46.09936     17.5347         18         89
      paeduc │     45,837    10.71026    4.342689          0         20
      maeduc │     53,870    10.85365    3.768792          0         20
      degree │     64,641     1.35858    1.175289          0          4
         sex │     64,814    1.558521    .4965673          1          2</code></pre>
<pre class="stata"><code>. tabulate degree

   r&#39;s highest │
        degree │      Freq.     Percent        Cum.
───────────────┼───────────────────────────────────
lt high school │     13,587       21.02       21.02
   high school │     33,195       51.35       72.37
junior college │      3,668        5.67       78.05
      bachelor │      9,475       14.66       92.70
      graduate │      4,716        7.30      100.00
───────────────┼───────────────────────────────────
         Total │     64,641      100.00</code></pre>
</div>
<div id="the-ordinal-model-k-categories" class="slide section level1">
<h1>The Ordinal Model (<em>k categories</em>)</h1>
<p><span class="math display">\[ ln(\frac{p(y \le k)}{p(y &gt; k)}) = \beta_0 + \beta_1 x + ... \]</span></p>
</div>
<div id="ordinal-regression" class="slide section level1">
<h1>Ordinal Regression</h1>
<pre class="stata"><code>. ologit degree sex age paeduc maeduc

Iteration 0:   log likelihood = -56160.846  
Iteration 1:   log likelihood = -50678.236  
Iteration 2:   log likelihood = -50453.401  
Iteration 3:   log likelihood = -50452.782  
Iteration 4:   log likelihood = -50452.782  

Ordered logistic regression                     Number of obs     =     42,583
                                                LR chi2(4)        =   11416.13
                                                Prob &gt; chi2       =     0.0000
Log likelihood = -50452.782                     Pseudo R2         =     0.1016

─────────────┬────────────────────────────────────────────────────────────────
      degree │      Coef.   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
─────────────┼────────────────────────────────────────────────────────────────
         sex │  -.0756255   .0188243    -4.02   0.000    -.1125204   -.0387307
         age │   .0124686   .0006014    20.73   0.000     .0112899    .0136474
      paeduc │    .151748   .0031156    48.71   0.000     .1456416    .1578545
      maeduc │    .157931   .0036724    43.00   0.000     .1507332    .1651288
─────────────┼────────────────────────────────────────────────────────────────
       /cut1 │   1.686014   .0565978                      1.575084    1.796944
       /cut2 │   4.710994     .06085                       4.59173    4.830258
       /cut3 │   5.061419   .0614286                      4.941021    5.181817
       /cut4 │   6.542017   .0645181                      6.415564     6.66847
─────────────┴────────────────────────────────────────────────────────────────</code></pre>
<blockquote>
<p>Many commands for regression of categorical dependent variables in R do not provide p values, and an extra step has to be taken to get p values. This is <em>not</em> a problem in Stata!</p>
</blockquote>
</div>
<div id="exponentiating-coefficients-ebeta" class="slide section level1">
<h1>Exponentiating Coefficients: <span class="math inline">\(e^\beta\)</span></h1>
<pre class="stata"><code>. ologit degree sex age paeduc maeduc, or

Iteration 0:   log likelihood = -56160.846  
Iteration 1:   log likelihood = -50678.236  
Iteration 2:   log likelihood = -50453.401  
Iteration 3:   log likelihood = -50452.782  
Iteration 4:   log likelihood = -50452.782  

Ordered logistic regression                     Number of obs     =     42,583
                                                LR chi2(4)        =   11416.13
                                                Prob &gt; chi2       =     0.0000
Log likelihood = -50452.782                     Pseudo R2         =     0.1016

─────────────┬────────────────────────────────────────────────────────────────
      degree │ Odds Ratio   Std. Err.      z    P&gt;|z|     [95% Conf. Interval]
─────────────┼────────────────────────────────────────────────────────────────
         sex │   .9271633   .0174532    -4.02   0.000     .8935791    .9620098
         age │   1.012547    .000609    20.73   0.000     1.011354    1.013741
      paeduc │   1.163867   .0036261    48.71   0.000     1.156782    1.170996
      maeduc │   1.171085   .0043007    43.00   0.000     1.162686    1.179545
─────────────┼────────────────────────────────────────────────────────────────
       /cut1 │   1.686014   .0565978                      1.575084    1.796944
       /cut2 │   4.710994     .06085                       4.59173    4.830258
       /cut3 │   5.061419   .0614286                      4.941021    5.181817
       /cut4 │   6.542017   .0645181                      6.415564     6.66847
─────────────┴────────────────────────────────────────────────────────────────
Note: Estimates are transformed only in the first equation.</code></pre>
</div>
<div id="the-proportional-odds-assumption" class="slide section level1">
<h1>The Proportional Odds Assumption</h1>
</div>
</body>
</html>
