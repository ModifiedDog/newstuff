---
title: "How To Choose A Chart: An Intuitive Guide"
author: "Andy Grogan-Kaylor"
date: "`r Sys.Date()`"
output:
  pdf_document: 
    fig_width: 10
    latex_engine: xelatex
  html_document:
    fig_width: 10
    highlight: haddock
    code_download: yes
mainfont: Futura
classoption: landscape
geometry: margin=.5in
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE,
                      message = FALSE,
                      warning = FALSE)

library(ggplot2)

library(ggbeeswarm)

library(patchwork)

library(michigancolors)

```

A more *intuitive* guide to [*How To Choose A Chart*](https://agrogan1.github.io/dataviz/how-to-choose-a-chart/how-to-choose-a-chart-a-visual-guide.pdf).

```{r}

N <- 1000

predictor <- rbeta(N, 2, 7)

outcome <- rbeta(N, 2, 7)

group <- factor(rbinom(N, 1, .4),
                levels = c(0, 1),
                labels = c("Group A", "Group B"))

outcome <- ifelse(group == "Group B",
                  outcome + .3,
                  outcome)

outcomeC <- ifelse(outcome >= quantile(outcome, c(.50)),
                   1,
                   0)

outcomeC <- factor(outcomeC,
                   levels = c(0,1),
                   labels = c("Below Median", 
                              "At Or Above Median"))

mydata <- data.frame(predictor, group, outcome, outcomeC)

```

```{r}

myoutcome <- ggplot(data = mydata,
                    aes(x = outcome,
                        fill = factor(1),
                        color = factor(2))) +
  labs(title = "How Many People Experience This Outcome?") +
  scale_color_manual(values = c(michigancolors("angell hall ash"), 
                                michigancolors("blue"))) +
  scale_fill_manual(values = c(michigancolors("blue"),
                               michigancolors("maize"))) +
  theme(legend.position = "none",
        axis.text.x = element_blank(),
        axis.ticks.x = element_blank(),
        title = element_text(size = rel(.5)))

```

```{r}

mydensity <- myoutcome + geom_density() +
  labs(subtitle = "Density Plot")

myhistogram <- myoutcome + 
  geom_histogram() +
  labs(subtitle = "Histogram")

mybeeswarm <- myoutcome + 
  geom_beeswarm(aes(y = 1), 
                color = michigancolors("arboretum blue"),
                size = .25,
                groupOnX = FALSE) +
  labs(subtitle = "Beeswarm Plot")

mycomparison <- myoutcome + 
  geom_histogram(aes(fill = group, color = group)) + 
  facet_wrap(~group, ncol = 1) +
  labs(subtitle = "Histogram With Comparison")

mybar <- ggplot(data = mydata,
                aes(x = group,
                    fill = group)) +
  geom_bar() +
  scale_fill_manual(values = michigancolors()) +
  scale_color_manual(values = michigancolors("angell hall ash")) +
  labs(title = "How Many People Are In Each Group?",
       subtitle = "Bar Chart") +
  theme(legend.position = "none",
        title = element_text(size = rel(.5)))

mycomparisonC <- ggplot(data = mydata,
                        aes(x = outcomeC,
                            fill = group)) +
  geom_bar() + 
  facet_wrap(~group,
             ncol = 2) +
  scale_fill_manual(values = michigancolors()) +
  scale_color_manual(values = michigancolors("angell hall ash")) +
  labs(title = "How Many People Experience Each Outcome?",
       subtitle = "Bar Chart With Comparison",
       x = "") +
  theme(legend.position = "none",
        title = element_text(size = rel(.5)),
        axis.text.x = element_text(size = rel(.5)))

mypie <- ggplot(data = mydata,
                aes(x = 1,
                    fill = group)) +
  geom_bar() +
  coord_polar(theta = "y") +
  scale_fill_manual(values = michigancolors()) +
  labs(title = "How Many People Are In Each Group?",
       subtitle = "Pie Chart") +
  theme_void() +
  theme(title = element_text(size = rel(.75)))
  
myscatterplot <- ggplot(mydata,
                        aes(x = predictor,
                            y = outcome,
                            color = factor(1))) +
  geom_point() +
  geom_smooth(color = michigancolors("arboretum blue")) +
  scale_color_manual(values = michigancolors("matthaei violet")) +
  labs(title = "What is the Relationship of Predictor to Outcome?",
       subtitle = "Scatterplot") +
  theme(legend.position = "none",
        title = element_text(size = rel(.5)))
  

```

```{r}

myhistogram + mybeeswarm + myscatterplot + 
  mycomparison + mybar + mycomparisonC 

ggsave("intuitive-guide.pdf", 
       width = 10, 
       height = 7.5)

```

